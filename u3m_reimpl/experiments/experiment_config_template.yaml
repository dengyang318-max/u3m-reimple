# Ray Sweeping 2D 实验配置模板
# 使用此模板确保实验的可复现性和可控性

experiment_name: "ray_sweeping_2d_experiment"
experiment_date: "2025-12-04"
experiment_version: "1.0.0"

# ============================================================================
# 数据预处理配置
# ============================================================================
data_preprocessing:
  # 归一化方式: min_max | z_score | none
  normalization: "min_max"
  
  # 是否进行 min-shift（将数据平移到第一象限）
  min_shift:
    enabled: true
    apply_to: ["x", "y"]  # 应用到哪些坐标
  
  # 数据采样配置
  sampling:
    method: "random"  # random | stratified | none
    n_samples: 500
    random_state: 1
  
  # 数据打乱配置
  shuffle:
    enabled: true
    random_state: 0
    frac: 1.0  # 对于 College Admission，使用 frac=1.0 表示打乱全部数据

# ============================================================================
# 算法参数配置
# ============================================================================
algorithm_params:
  # 最小角度步长（弧度）
  min_angle_step: 0.3141592653589793  # π/10
  
  # 返回的 top-k 方向数量
  top_k: 10
  
  # 是否使用增量枚举（当前未实现）
  use_incremental: false
  
  # 是否使用随机化枚举（当前未实现）
  use_randomized: false

# ============================================================================
# 方向合并策略配置
# ============================================================================
direction_merging:
  # 主点集的方向映射函数（通常是恒等映射）
  vector_transfer_primary: "identity"  # identity | custom
  
  # 旋转点集的方向映射函数（通常是 90° 旋转）
  vector_transfer_rotated: "90_degree_rotation"  # 90_degree_rotation | custom
  
  # 合并策略: union_sort | intersection | ...
  merge_strategy: "union_sort"
  
  # 自定义映射函数（如果使用 custom）
  custom_vector_transfer_primary: null
  custom_vector_transfer_rotated: null

# ============================================================================
# 交点过滤配置
# ============================================================================
intersection_filtering:
  # 是否只保留第一象限的交点
  filter_quadrant: "first"  # first | all
  
  # 是否过滤无限远点
  filter_infinite: true

# ============================================================================
# 数值稳定性配置
# ============================================================================
numerical_stability:
  # 浮点数零值容差
  zero_tolerance: 1e-10
  
  # 是否使用稳定排序
  sort_stable: true
  
  # 终止条件：使用精确相等还是容差比较
  termination_condition: "exact"  # exact | tolerance

# ============================================================================
# 实验预设配置
# ============================================================================
# 可以使用以下预设配置：
# - original: 原始算法（无 min-shift，无 vector_transfer）
# - updated: 更新算法（有 min-shift，有 vector_transfer）
# - official: 官方实现风格（有 min-shift，有 vector_transfer，只保留第一象限）

preset: "updated"  # original | updated | official

# ============================================================================
# 结果分析配置
# ============================================================================
result_analysis:
  # 是否进行多百分位评估
  multi_percentile_evaluation: true
  
  # 百分位列表
  percentiles: [1.00, 0.50, 0.20, 0.10, 0.08, 0.04]
  
  # 可视化配置
  visualization:
    # 可视化多少个 top 方向
    n_directions_to_visualize: 3
    
    # 是否保存图片
    save_figures: true
    
    # 图片保存路径
    figure_save_path: "results/{experiment_name}/{timestamp}"
    
    # 图片分辨率
    figure_dpi: 200

# ============================================================================
# 日志配置
# ============================================================================
logging:
  # 是否保存日志到文件
  save_log: true
  
  # 日志文件路径
  log_file_path: "results/{experiment_name}/{timestamp}/{experiment_name}_log.md"
  
  # 日志级别: DEBUG | INFO | WARNING | ERROR
  log_level: "INFO"
  
  # 是否打印配置信息
  print_config: true

# ============================================================================
# 稳定性分析配置
# ============================================================================
stability_analysis:
  # 是否进行稳定性分析
  enabled: false
  
  # 运行次数
  n_runs: 10
  
  # 随机种子范围
  random_seed_range: [0, 9]
  
  # 方向相似性阈值（弧度）
  direction_similarity_threshold: 0.1
  
  # Tail 区域重叠率阈值
  tail_overlap_threshold: 0.5

